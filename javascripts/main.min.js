var MMCQ,PriorityQueue;!function(o,a,e,t){var s="textareaAutoSize",i="plugin_"+s;function n(e,t){this.element=e,this.$element=o(e),this.init()}n.prototype={init:function(){this.$element.outerHeight();var i=parseInt(this.$element.css("paddingBottom"))+parseInt(this.$element.css("paddingTop"))||0;0<this.element.value.replace(/\s/g,"").length&&this.$element.height(this.element.scrollHeight-i),this.$element.on("input keyup",function(e){var t=o(a),s=t.scrollTop();o(this).height(0).height(this.scrollHeight-i),t.scrollTop(s)})}},o.fn[s]=function(e){return this.each(function(){o.data(this,i)||o.data(this,i,new n(this,e))}),this}}(jQuery,window,document),function(v){var e=function(){return v("html").hasClass("editmode")};v(".accessibility-btn").click(function(){v("html").toggleClass("accessibility-open"),v("html").removeClass("mobilemenu-open")}),v(".accessibility-close-button").click(function(){v("html").removeClass("accessibility-open")}),v(document).click(function(e){!1===v(e.target).is(".accessibility-btn")&&v("html").removeClass("accessibility-open")}),v(".accessibility-block-wrap").click(function(e){e.stopPropagation()}),!function(e){try{var t=window[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}("localStorage")?console.warn("Local storage full"):v(document).ready(function(){var e=JSON.parse(localStorage.getItem("blind")),t=JSON.parse(localStorage.getItem("restore-defaults")),s=JSON.parse(localStorage.getItem("size-large")),i=JSON.parse(localStorage.getItem("size-huge")),o=JSON.parse(localStorage.getItem("line-height-large")),a=JSON.parse(localStorage.getItem("line-height-huge"));1==e?(v("html").addClass("accessibility-colors"),v("input#accessibility-contrast").prop("checked",!0)):(v("html").removeClass("accessibility-colors"),v("input#accessibility-contrast").prop("checked",!1)),1==o?(v("html").addClass("accessibility-line-height-large"),v("input#line-height-large").prop("checked",!0)):(v("html").removeClass("accessibility-line-height-large"),v("input#line-height-large").prop("checked",!1)),1==a?(v("html").addClass("accessibility-line-height-huge"),v("input#line-height-huge").prop("checked",!0)):(v("html").removeClass("accessibility-line-height-huge"),v("input#line-height-huge").prop("checked",!1)),1==s?(v("html").addClass("accessibility-size-large"),v("input#size-large").prop("checked",!0)):(v("html").removeClass("accessibility-size-large"),v("input#size-large").prop("checked",!1)),1==i?(v("html").addClass("accessibility-size-huge"),v("input#size-huge").prop("checked",!0)):(v("html").removeClass("accessibility-size-huge"),v("input#size-huge").prop("checked",!1)),1==t&&(v("html").removeClass("accessibility-colors"),v("input#accessibility-contrast").prop("checked",!1),v("input#line-height-default").prop("checked",!0),v("input#font-size-default").prop("checked",!0))}),v(".accessibility-restore").click(function(){v("html").removeClass("accessibility-colors"),v("html").removeClass("accessibility-line-height-large"),v("html").removeClass("accessibility-line-height-huge"),v("html").removeClass("accessibility-size-large"),v("html").removeClass("accessibility-size-huge"),v("input#accessibility-contrast").prop("checked",!1),v("input#line-height-default").prop("checked",!0),v("input#size-default").prop("checked",!0),localStorage.setItem("line-height-large",JSON.stringify(!1)),localStorage.setItem("line-height-huge",JSON.stringify(!1)),localStorage.setItem("size-large",JSON.stringify(!1)),localStorage.setItem("size-huge",JSON.stringify(!1)),localStorage.setItem("blind",JSON.stringify(!1)),localStorage.setItem("restore-defaults",JSON.stringify(!0))}),v(".accessibility-save").click(function(){v("input#accessibility-contrast").is(":checked")?(v("html").addClass("accessibility-colors"),localStorage.setItem("blind",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(v("html").removeClass("accessibility-colors"),localStorage.setItem("blind",JSON.stringify(!1))),v("#line-height-large").is(":checked")?(v("html").addClass("accessibility-line-height-large"),localStorage.setItem("line-height-large",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(v("html").removeClass("accessibility-line-height-large"),localStorage.setItem("line-height-large",JSON.stringify(!1))),v("#line-height-huge").is(":checked")?(v("html").addClass("accessibility-line-height-huge"),localStorage.setItem("line-height-huge",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(v("html").removeClass("accessibility-line-height-huge"),localStorage.setItem("line-height-huge",JSON.stringify(!1))),v("#size-large").is(":checked")?(v("html").addClass("accessibility-size-large"),localStorage.setItem("size-large",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(v("html").removeClass("accessibility-size-large"),localStorage.setItem("size-large",JSON.stringify(!1))),v("#size-huge").is(":checked")?(v("html").addClass("accessibility-size-huge"),localStorage.setItem("size-huge",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(v("html").removeClass("accessibility-size-huge"),localStorage.setItem("size-huge",JSON.stringify(!1)))});var t=function(i,o,a){var n;return function(){var e=this,t=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||i.apply(e,t)},o),s&&i.apply(e,t)}};v(".mobile-menu-toggler").click(function(e){e.preventDefault(),v("html").toggleClass("mobilemenu-open"),v("html").removeClass("menu-language-popover-open"),v("body").removeClass("mobilesearch-open"),v("#mobile-menu").removeClass("reset-touch").addClass("reset-touch")}),v(".tags-toggle").click(function(){v(this).find(".ico-arrow").toggleClass("active"),v(".tags-bottom").toggleClass("visible")}),v(".js-toggle-sub-menu").click(function(){v("#mobile-menu").removeClass("reset-touch").addClass("reset-touch"),v(this).toggleClass("active"),v(this).parent("li").toggleClass("current-parent")}),v(".mobile-menu-close").on("click",function(){event.preventDefault(),v("html").hasClass("menu-language-popover-open")?v("html").removeClass("menu-language-popover-open"):v("html").removeClass("mobilemenu-open")}),v(".js-lang-menu-btn").on("click",function(){v("html").removeClass("search-open"),v(".js-search").removeClass("active"),v("html").hasClass("menu-language-popover-open")?v("html").removeClass("menu-language-popover-open"):(n(v(this)),v("html").addClass("menu-language-popover-open"))});var s,i,o,a,n=function(e){var t=v("html").hasClass("language-flags-disabled")?e.find(".js-lang-title-inner"):e,s=v("html").hasClass("language-flags-disabled")?5:9;v(".js-popup-menu-popover").css({top:t.offset().top+t.outerHeight()-v(".site-container").offset().top,right:v(window).width()-t.offset().left-t.outerWidth()-s})},r=function(){var e=v("html"),t=v(".js-menu-language-settings");v(window).width()<=1024&&0===t.closest(".js-menu-main-mobile").length?t.appendTo(".js-menu-main-mobile"):1024<v(window).width()&&0===t.closest(".js-menu-main-desktop").length&&(e.hasClass("language-menu-mode-list")?t.appendTo(".js-menu-language-list-setting-parent"):t.appendTo(".js-menu-language-popover-setting-parent"),n(v(".js-lang-menu-btn")))},u=function(e,t){.6<t?v(e).find(".js-background-type").addClass("light-background").removeClass("dark-background"):v(e).find(".js-background-type").addClass("dark-background").removeClass("light-background")},l=function(e,t){return function(s,i){if(s&&i){"string"==typeof s&&(s=s.replace(/rgba?\(/,"").replace(/\)/,"").split(","),v.each(s,function(e,t){s[e]=+t})),"string"==typeof i&&(i=i.replace(/rgba?\(/,"").replace(/\)/,"").split(","),v.each(i,function(e,t){i[e]=+t})),"object"==typeof s&&s.hasOwnProperty("length")&&3==s.length&&s.push(1),"object"==typeof i&&i.hasOwnProperty("length")&&3==i.length&&i.push(1);var e=[0,0,0,0];return e[3]=1-(1-i[3])*(1-s[3]),0===e[3]&&(e[3]=1e-6),e[0]=Math.min(i[0]*i[3]/e[3]+s[0]*s[3]*(1-i[3])/e[3],255),e[1]=Math.min(i[1]*i[3]/e[3]+s[1]*s[3]*(1-i[3])/e[3],255),e[2]=Math.min(i[2]*i[3]/e[3]+s[2]*s[3]*(1-i[3])/e[3],255),v.map(e,function(e){return Math.floor(e)})}}(e||[255,255,255,1],t||[255,255,255,1])},d=function(e,t){var s=l(e,t);return Math.round((.2126*+s[0]+.7152*+s[1]+.0722*+s[2])/2.55)/100},c=function(){var e=v(".main-content");if(v("html").hasClass("comments-open")){var t=v(document).outerHeight(),s=v(".js-site-header").outerHeight(),i=v(".article-comments"),o=i.outerHeight(),a=v(".site-footer").outerHeight();i.css("min-height",t-s),e.css("min-height",o-a),v("html, body").animate({scrollTop:v(".js-comments").offset().top},300)}else e.removeAttr("style")},g=function(){v(".article-comments").removeAttr("style");v(document).height(),v(".site-container").height(),v(".article-comments").height();var e=parseInt(v(".article-comments").css("padding-top")),t=parseInt(v(".article-comments").css("padding-bottom")),s=v(".page-content").height(),i=v(".site-header").height(),o=s+i+v(".site-footer").height()-i-e-t;480<v(window).width()&&v(".article-comments").css("min-height",o)},h=function(e){if(v(".js-type-btn").removeClass("is-active"),e.addClass("is-active"),"photo-article"==e.data("article-type")){v(".js-article-title").prependTo(".js-article-header-title-wrap"),v(".js-text-article-component").addClass("is-hidden"),v(".js-photo-article-component").removeClass("is-hidden"),v(".js-site-header").addClass("photo-article"),v(".js-site-header .js-background-settings").removeClass("is-hidden");var t=v(".js-site-header .js-background-type").data("article-bg-type");v(".js-site-header .js-background-type").removeClass("dark-background light-background").addClass(t),Edicy.articles.currentArticle.setData("photo_article_state",!0)}else{v(".js-article-title").prependTo(".js-article-body-title-wrap"),v(".js-photo-article-component").addClass("is-hidden"),v(".js-text-article-component").removeClass("is-hidden"),v(".js-site-header").removeClass("photo-article"),v(".js-site-header .js-background-settings").addClass("is-hidden");t=v(".js-site-header .js-background-type").data("blog-bg-type");v(".js-site-header .js-background-type").removeClass("dark-background light-background").addClass(t),Edicy.articles.currentArticle.setData("photo_article_state",!1)}},m=function(){v(window).width()<=640?v(".js-voog-search-modal").css("max-height",v(window).height()-56):v(".js-voog-search-modal").css("max-height","auto")};window.site=v.extend(window.site||{},{bgPickerPreview:function(t,e,s,i){var o=v(t).find(".js-background-image").css("background-image"),a=e.imageSizes?function(e,t){for(var s,i=0,o=e.length;i<o;i++){if(e[i].width<t)return s||e[i];s=e[i]}return e[e.length-1]}(e.imageSizes,v(window).width()):null,n=e.image&&""!==e.image?"url("+a.url+")":"none",r=e.imageSizes&&""!==e.imageSizes?e.imageSizes:null,l=e.color&&""!==e.color?e.color:"rgba(0,0,0,0)",c=(e.colorData&&""!==e.colorData&&e.colorData.lightness,v("<img>")),g=v("<canvas>"),h=e.image&&""!==e.image?e.image:null;h?function(e,t){for(var s=e.length;s--;)if(-1<t.indexOf(e[s].url.trim()))return!0;return!1}(r,o)?(s.imageColor=s.imageColor?s.imageColor:i,s.combinedLightness=d(s.imageColor,l),u(t,s.combinedLightness)):(c.attr("src",h.replace(/.*\/(photos|voogstock)/g,"/photos")),c.on("load",function(){ColorExtract.extract(c[0],g[0],function(e){s.imageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",s.combinedLightness=d(s.imageColor,l),u(t,s.combinedLightness)})})):(s.imageColor="rgba(255,255,255,1)",s.combinedLightness=d(s.imageColor,l),u(t,s.combinedLightness)),"articlePage"===pageType&&t.hasClass("site-header")?v("#preview-style").html(".photo-article.site-header .js-background-image { background-image: "+n+" } .photo-article.site-header .js-background-color { background-color: "+l+" }"):(v(t).find(".js-background-image").css({"background-image":n}),v(t).find(".js-background-color").css({"background-color":l}))},bgPickerCommit:function(e,t,s,i){var o,a=v.extend(!0,{},t);a.image=t.image||"",a.imageSizes=null==(o=t.imageSizes)||"string"==typeof o&&o.match(/^[\\'"]+$/)?"":o,a.color=t.color||"",a.combinedLightness=s.combinedLightness,"articlePage"===i?"footer_bg"==e?siteData.set(e,a):Edicy.articles.currentArticle.setData(e,a):"contentPage"===i&&"footer_bg"===e||"body_bg"===e?siteData.set(e,a):pageData.set(e,a)},bgPickerColorScheme:function(e){void 0!==e&&(.6<e?v(".header-wrapper").addClass("light").removeClass("dark"):v(".header-wrapper").addClass("dark").removeClass("light"))},initWindowResize:function(){v(window).resize(t(function(){g(),m(),r(),v(".js-menu-language-settings-popover").hide()},100)),v(window).resize(t(function(){v("html").removeClass("menu-language-popover-open"),v(".js-menu-language-settings-popover").hide(),v(".js-menu-language-settings-toggle").removeClass("edy-cbtn-active")},25))},initBlogPage:function(){},initArticlePage:function(){g(),v("html").hasClass("js-calculate-comments-height")&&c()},initCommonPage:function(){},initFrontPage:function(){},bindLanguageMenuSettings:function(e){"type"in e||(e.type="popover"),"item_state"in e||(e.item_state="flags_and_names");new Edicy.SettingsEditor(v(".js-menu-language-settings-toggle").get(0),{menuItems:[{titleI18n:"format_desktop_only",type:"radio",key:"type",list:[{titleI18n:"dropdown_menu",value:"popover"},{titleI18n:"expanded_menu",value:"list"}]},{titleI18n:"show",type:"radio",key:"item_state",list:[{titleI18n:"flags_only",value:"flags_only"},{titleI18n:"names_only",value:"names_only"},{titleI18n:"flags_and_names",value:"flags_and_names"}]}],buttonTitleI18n:"settings",values:e,containerClass:["js-menu-language-settings-popover","js-prevent-sideclick"],preview:function(e){var t=v("html");v(".js-menu-language-settings"),"list"===e.type?(t.removeClass("language-menu-mode-popover"),t.removeClass("menu-language-popover-open"),t.addClass("language-menu-mode-list")):(t.removeClass("language-menu-mode-list"),t.addClass("language-menu-mode-popover"),t.addClass("menu-language-popover-open")),"flags_only"===e.item_state?(t.removeClass("language-flags-disabled"),t.removeClass("language-names-enabled"),t.addClass("language-flags-enabled"),t.addClass("language-names-disabled")):"names_only"===e.item_state?(t.removeClass("language-flags-enabled"),t.removeClass("language-names-disabled"),t.addClass("language-flags-disabled"),t.addClass("language-names-enabled")):"flags_and_names"===e.item_state&&(t.removeClass("language-flags-disabled"),t.removeClass("language-names-disabled"),t.addClass("language-flags-enabled"),t.addClass("language-names-enabled")),r(),this.setPosition()},commit:function(e){siteData.set("settings_language_menu",e)}});r()},initItemsPage:function(){e()||(v(document).ready(function(){setTimeout(function(){v(".js-content-item-box").addClass("not-loaded")},3e3)}),v(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var e=v(this).closest(".js-content-item-box");e.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){e.removeClass("not-loaded with-error"),e.find(".js-loader").remove()},3e3)}}))},bindContentItemImgDropAreas:function(s){v(".js-content-item-img-drop-area").each(function(e,t){var m=v(t),p=m.closest(".js-content-item-box"),f=p.data("item-id"),b=p.data("item-type");new Edicy.CustomData({type:b,id:f}),new Edicy.ImgDropArea(m,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+s+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var t,s,i,o,a,n,r,l,c,g,h,u,d;m.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(t=e.original_id,p.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),s=p,i=e.width,o=e.height,a=s.find(".js-content-item-img-drop-area"),n=s.find(".js-toggle-crop-state"),o<i?a.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):i===o?a.removeClass("image-landscape image-square image-portrait").addClass("image-square"):a.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),a.hasClass("image-square")?n.removeClass("is-visible").addClass("is-hidden"):n.removeClass("is-hidden").addClass("is-visible")):(t=null,p.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),p.find(".edy-img-drop-area-placeholder").css("opacity",0)),r=p,l=m,c=f,g=t,u="article"===(h=b)?"articles":"pages",d=new Edicy.CustomData({type:h,id:c}),v.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+u+"/"+c,data:JSON.stringify({image_id:g}),dataType:"json",success:function(e){d.set("image_crop_state","not-cropped"),r.removeClass("not-loaded with-error").addClass("is-loaded"),r.find(".edy-img-drop-area-placeholder").css("opacity",1),l.css("opacity",1)},timeout:3e4,error:function(e){r.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})}})})},bindContentItemImageCropToggle:function(){v(".js-toggle-crop-state").on("click",function(){var e,t=v(this).closest(".js-content-item-box"),s=t.find(".js-content-item-img-drop-area"),i=t.data("item-id"),o=t.data("item-type"),a=new Edicy.CustomData({type:o,id:i});e=s.hasClass("is-cropped")?(s.removeClass("is-cropped").addClass("not-cropped"),"not-cropped"):(s.removeClass("not-cropped").addClass("is-cropped"),"is-cropped"),a.set("image_crop_state",e)})},bindRootItemSettings:function(s){"show_product_related_pages_in_main_menu"in s||(s.show_product_related_pages_in_main_menu=!1),v(".js-root-item-settings-toggle").each(function(e,t){new Edicy.SettingsEditor(t,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:s,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(e){1==!e.show_product_related_pages_in_main_menu?v(".js-menu-item-products").addClass("is-hidden"):v(".js-menu-item-products").removeClass("is-hidden")},commit:function(e){siteData.set("settings_root_item",e)}})})},bindSiteSearch:function(e,t,s){e&&new VoogSearch(e,{per_page:10,lang:t,resultsContainer:v(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:s})}}),window.site=v.extend(window.site||{},{}),v(".site-container").on("mousedown",function(e){v(e.target).closest(".js-prevent-sideclick").length||(v(".js-btn").hasClass("open")&&v(".js-btn").removeClass("open"),v(".js-popover").hasClass("expanded")&&v(".js-popover").removeClass("expanded"),v(".js-search").hasClass("active")&&(v(".js-search").removeClass("active"),v(".search-btn").removeClass("open")),v("html").hasClass("mobilemenu-open")&&v(".mobile-menu-toggler").trigger("click"),v("html").hasClass("menu-language-popover-open")&&v("html").removeClass("menu-language-popover-open"),v("html").hasClass("comments-open")&&(v("html").removeClass("comments-open"),v(".js-comments-toggle-btn, .js-comments").removeClass("open")),v("html").hasClass("search-open")&&v("html").removeClass("search-open"),c())}),v(".js-menu-btn").click(function(){v(this).toggleClass("open"),v(".js-menu-main").toggleClass("expanded")}),v(".js-menu-lang-btn").click(function(){v(".js-menu-lang-btn").toggleClass("open"),v(".js-menu-lang").toggleClass("expanded")}),v(".js-tags-btn").click(function(){v(this).toggleClass("open"),v(".js-menu-tags").toggleClass("expanded")}),v(".js-search-toggle-btn").click(function(){v("html").removeClass("mobilemenu-open"),v("html").removeClass("menu-language-popover-open"),v(".js-search").toggleClass("active"),v(".js-search").hasClass("active")&&v(".js-search-input").focus(),v("html").toggleClass("search-open")}),v(".js-search-input").on("input",function(){var e=v(this).parent().next();1<v(this).val().length?e.addClass("active"):e.removeClass("active"),m()}),v(".js-search-reset-btn").click(function(){v("html").removeClass("search-open"),v(".js-search").removeClass("active")}),v(".js-comments-toggle-btn").click(function(){v(this).toggleClass("open"),v(".js-comments").toggleClass("open"),v("html").toggleClass("comments-open"),v(".js-comments-input").val("").focus(),640<v(window).width()&&c()}),v(".submenu-load-more-lvl1").click(function(){v(this).addClass("open"),v(this).next().addClass("open"),v(this).next().next().addClass("open")}),v(".submenu-close-lvl1").click(function(){v(this).removeClass("open"),v(this).prev().removeClass("open"),v(this).next().removeClass("open")}),v(".submenu-load-more-lvl2").click(function(){v(this).addClass("open"),v(this).next().addClass("open"),v(this).next().next().addClass("open")}),v(".submenu-close-lvl2").click(function(){v(this).removeClass("open"),v(this).prev().removeClass("open"),v(this).next().removeClass("open")}),v(".js-type-btn").click(function(){h(v(this))}),v(".publicmode .js-slide-to-article").click(function(){v("html, body").animate({scrollTop:v(".page-content").offset().top},300)}),v("body:not(.editmode) table").each(function(){v(this).wrap('<div class="table-holder" />')}),v(document).ready(function(){v(".comment-form").hasClass("form_with_errors")?v("html, body").scrollTop(v(".comment-form").offset().top):0<v("form").find(".form_error, .form_notice").length&&v("html, body").scrollTop(v(".form_error, .form_notice").closest("form").offset().top)}),document.addEventListener("edicy:customstyles:change",function(e){-1<Object.keys(e.detail.changes).indexOf("--header-background-color")&&(void 0===e.detail.changes["--header-background-color"].value?(v("body").removeClass("header-top-with-bg"),siteData.remove("has_header_bg_color")):(v("body").addClass("header-top-with-bg"),siteData.set("has_header_bg_color",!0)))}),!Modernizr.flexbox&&e()&&(s=v(".js-header-top-wrap").width(),i=v(".js-header-right"),o=i.width(),a=parseInt(i.css("margin-left"))+1,v(".js-header-left").css("min-width",s-o-a))}(jQuery),PriorityQueue=function(){function e(e){this.comparator=e,this.contents=[],this.sorted=!1}return e.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},e.prototype.push=function(e){return this.contents.push(e),this.sorted=!1},e.prototype.peek=function(e){return null==e&&(e=this.contents.length-1),this.sorted||this.sort(),this.contents[e]},e.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},e.prototype.size=function(){return this.contents.length},e.prototype.map=function(e){return this.contents.map(e)},e}(),MMCQ=function(){var m,n,g,D,h,u;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),D=function(e,t,s){return(e<<2*b.sigbits)+(t<<b.sigbits)+s},m=function(){function e(e,t,s,i,o,a,n){this.r1=e,this.r2=t,this.g1=s,this.g2=i,this.b1=o,this.b2=a,this.histo=n}return e.prototype.volume=function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},e.prototype.count=function(e){var t,s,i,o,a,n,r,l,c,g,h;if(!this._count_set||e){for(o=0,a=n=this.r1,c=this.r2;n<=c;a=n+=1)for(s=r=this.g1,g=this.g2;r<=g;s=r+=1)for(t=l=this.b1,h=this.b2;l<=h;t=l+=1)i=D(a,s,t),o+=this.histo[i]||0;this._count_set=!0,this._count=o}return this._count},e.prototype.copy=function(){return new e(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},e.prototype.average=function(e){var t,s,i,o,a,n,r,l,c,g,h,u,d,m,p,f;if(!this._average||e){for(r=1<<8-b.sigbits,s=o=c=g=0,l=h=this.r1,m=this.r2;h<=m;l=h+=1)for(i=u=this.g1,p=this.g2;u<=p;i=u+=1)for(t=d=this.b1,f=this.b2;d<=f;t=d+=1)n=D(l,i,t),g+=a=this.histo[n]||0,c+=a*(l+.5)*r,o+=a*(i+.5)*r,s+=a*(t+.5)*r;this._average=g?[~~(c/g),~~(o/g),~~(s/g)]:[~~(r*(this.r1+this.r2+1)/2),~~(r*(this.g1+this.g2+1)/2),~~(r*(this.b1+this.b2+1)/2)]}return this._average},e.prototype.contains=function(e){var t,s,i;return i=e[0]>>b.rshift,s=e[1]>>b.rshift,t=e[2]>>b.rshift,this.r1<=i&&i<=this.r2&&this.g1<=s&&s<=this.g2&&this.b1<=t&&t<=this.b2},e}(),n=function(){function e(){this.cboxes=new PriorityQueue(function(e,t){var s,i;return s=e.count()*e.volume(),(i=t.count()*t.volume())<s?1:s<i?-1:0})}return e.prototype.push=function(e){return this.cboxes.push({cbox:e,color:e.average()})},e.prototype.palette=function(){return this.cboxes.map(function(e){return e.color})},e.prototype.size=function(){return this.cboxes.size()},e.prototype.map=function(e){var t,s,i;for(t=s=0,i=this.cboxes.size();s<i;t=s+=1)return this.cboxes.peek(t).cbox.contains(e)?this.cboxes.peek(t).color:this.nearest(e)},e.prototype.cboxes=function(){return this.cboxes},e.prototype.nearest=function(e){var t,s,i,o,a,n,r;for(a=function(e){return e*e},i=1e9,s=n=0,r=this.cboxes.size();n<r;s=n+=1)(t=Math.sqrt(a(e[0]-this.cboxes.peek(s).color[0])+a(e[1]-this.cboxes.peek(s).color[1])+a(e[2]-this.cboxes.peek(s).color[2])))<i&&(i=t,o=this.cboxes.peek(s).color);return o},e}(),h=function(e){var t,s,i,o,a,n,r,l;for(i=new Array(1<<3*b.sigbits),r=0,l=e.length;r<l;r++)n=(a=e[r])[0]>>b.rshift,s=a[1]>>b.rshift,t=a[2]>>b.rshift,i[o=D(n,s,t)]=(i[o]||0)+1;return i},g=function(e,t){var s,i,o,a,n,r,l,c,g,h,u,d;for(o=r=h=1e6,u=i=n=g=0,d=e.length;u<d;u++)(c=(l=e[u])[0]>>b.rshift)<h?h=c:g<c&&(g=c),(a=l[1]>>b.rshift)<r?r=a:n<a&&(n=a),(s=l[2]>>b.rshift)<o?o=s:i<s&&(i=s);return new m(h,g,r,n,o,i,t)},u=function(e,u){var t,s,i,o,a,d,n,m,r,l,c,p,g,h,f,b,v,C,y,w,j,k,_,x,S,I,z,O,A,N;if(u.count()){if(1===u.count())return[u.copy()];if(l=u.r2-u.r1+1,a=u.g2-u.g1+1,s=u.b2-u.b1+1,n=Math.max(l,a,s),p=0,m=[],d=[],n===l)for(r=g=u.r1,k=u.r2;g<=k;r=g+=1){for(c=0,o=h=u.g1,z=u.g2;h<=z;o=h+=1)for(t=f=u.b1,O=u.b2;f<=O;t=f+=1)c+=e[D(r,o,t)]||0;p+=c,m[r]=p}else if(n===a)for(o=b=u.g1,A=u.g2;b<=A;o=b+=1){for(c=0,r=v=u.r1,N=u.r2;v<=N;r=v+=1)for(t=C=u.b1,_=u.b2;C<=_;t=C+=1)c+=e[D(r,o,t)]||0;p+=c,m[o]=p}else for(t=y=u.b1,x=u.b2;y<=x;t=y+=1){for(c=0,r=w=u.r1,S=u.r2;w<=S;r=w+=1)for(o=j=u.g1,I=u.g2;j<=I;o=j+=1)c+=e[D(r,o,t)]||0;p+=c,m[t]=p}return m.forEach(function(e,t){return d[t]=p-e}),i=function(e){var t,s,i,o,a,n,r,l,c,g,h;for(n=e+"2",r=g=u[a=e+"1"],h=u[n];g<=h;r=g+=1)if(m[r]>p/2){for(t=u.copy(),s=u.copy(),o=(l=r-u[a])<=(c=u[n]-r)?Math.min(u[n]-1,~~(r+c/2)):Math.max(u[a],~~(r-1-l/2));!m[o];)o++;for(i=d[o];!i&&m[o-1];)i=d[--o];return t[n]=o,s[a]=t[n]+1,[t,s]}},n===l?i("r"):n===a?i("g"):n===s?i("b"):void 0}},b.prototype.quantize=function(e,t){var r,s,l,i,o,a,c=this;if(!e.length||t<2||256<t)return console.log("invalid arguments"),!1;for(l=h(e),r=g(e,l),(o=new PriorityQueue(function(e,t){var s,i;return s=e.count(),(i=t.count())<s?1:s<i?-1:0})).push(r),(i=function(e,t){var s,i,o,a,n;for(a=1,n=0;n<c.maxIterations;)if((r=e.pop()).count()){if(s=(o=u(l,r))[0],i=o[1],!s)return void console.log("cbox1 not defined; shouldn't happen");if(e.push(s),i&&(e.push(i),a++),t<=a)return;if(n++>c.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else e.push(r),n++})(o,this.fractByPopulations*t),a=new PriorityQueue(function(e,t){var s,i;return s=e.count()*e.volume(),(i=t.count()*t.volume())<s?1:s<i?-1:0});o.size();)a.push(o.pop());for(i(a,t-a.size()),s=new n;a.size();)s.push(a.pop());return s},b}.call(this),function(){window.ColorExtract=function(){function f(){}return f.getColorMap=function(e,t,s,i,o,a){var n,r,l,c,g,h,u,d,m,p;for(null==a&&(a=8),l=e.getContext("2d").getImageData(t,s,i,o).data,c=[],h=u=s,m=s+o;u<m;h=u+=1)for(r=h*i*4,g=d=t,p=t+i;d<p;g=d+=1)n=r+4*g,c.push([l[n],l[n+1],l[n+2]]);return(new MMCQ).quantize(c,a)},f.colorDist=function(e,t){var s;return(s=function(e){return e*e})(e[0]-t[0])+s(e[1]-t[1])+s(e[2]-t[2])},f.extract=function(e,t,s){var i,o,a,n,r,l,c,g,h,u,d,m,p;for(t.width=25,t.height=25,t.getContext("2d").drawImage(e,0,0,t.width,t.height),(o=f.getColorMap(t,0,0,t.width,t.height,4).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),i=o[0].rgb,(c=f.getColorMap(t,0,0,e.width,e.height,10).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),u=g=0,m=c.length;u<m;u++)a=c[u],g<(n=f.colorDist(i,a.rgb))&&(g=n,r=a.rgb);for(d=g=0,p=c.length;d<p;d++)a=c[d],g<(n=f.colorDist(i,a.rgb))&&a.rgb!==r&&(g=n,l=a.rgb);return s({bgColor:(h=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"})(i),fgColor:h(r),fgColor2:h(l)})},f}()}.call(this);