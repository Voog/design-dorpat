var MMCQ,PriorityQueue;!function(e,t,s,o){var i="textareaAutoSize",a="plugin_"+i;function n(t,s){this.element=t,this.$element=e(t),this.init()}n.prototype={init:function(){this.$element.outerHeight();var s=parseInt(this.$element.css("paddingBottom"))+parseInt(this.$element.css("paddingTop"))||0;this.element.value.replace(/\s/g,"").length>0&&this.$element.height(this.element.scrollHeight-s),this.$element.on("input keyup",function(o){var i=e(t),a=i.scrollTop();e(this).height(0).height(this.scrollHeight-s),i.scrollTop(a)})}},e.fn[i]=function(t){return this.each(function(){e.data(this,a)||e.data(this,a,new n(this,t))}),this}}(jQuery,window,document),function(e){var t=function(){return e("html").hasClass("editmode")};e(".accessibility-btn").click(function(){e("html").toggleClass("accessibility-open"),e("html").removeClass("mobilemenu-open")}),e(document).click(function(t){!1===e(t.target).is(".accessibility-btn")&&e("html").removeClass("accessibility-open")}),e(".accessibility-block-wrap").click(function(e){e.stopPropagation()}),!function(e){try{var t=window[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}("localStorage")?console.warn("Local storage full"):e(document).ready(function(){var t=JSON.parse(localStorage.getItem("blind")),s=JSON.parse(localStorage.getItem("restore-defaults")),o=JSON.parse(localStorage.getItem("size-large")),i=JSON.parse(localStorage.getItem("size-huge")),a=JSON.parse(localStorage.getItem("line-height-large")),n=JSON.parse(localStorage.getItem("line-height-huge"));1==t?(e("html").addClass("accessibility-colors"),e("input#accessibility-contrast").prop("checked",!0)):(e("html").removeClass("accessibility-colors"),e("input#accessibility-contrast").prop("checked",!1)),1==a?(e("html").addClass("accessibility-line-height-large"),e("input#line-height-large").prop("checked",!0)):(e("html").removeClass("accessibility-line-height-large"),e("input#line-height-large").prop("checked",!1)),1==n?(e("html").addClass("accessibility-line-height-huge"),e("input#line-height-huge").prop("checked",!0)):(e("html").removeClass("accessibility-line-height-huge"),e("input#line-height-huge").prop("checked",!1)),1==o?(e("html").addClass("accessibility-size-large"),e("input#size-large").prop("checked",!0)):(e("html").removeClass("accessibility-size-large"),e("input#size-large").prop("checked",!1)),1==i?(e("html").addClass("accessibility-size-huge"),e("input#size-huge").prop("checked",!0)):(e("html").removeClass("accessibility-size-huge"),e("input#size-huge").prop("checked",!1)),1==s&&(e("html").removeClass("accessibility-colors"),e("input#accessibility-contrast").prop("checked",!1),e("input#line-height-default").prop("checked",!0),e("input#font-size-default").prop("checked",!0))}),e(".accessibility-restore").click(function(){e("html").removeClass("accessibility-colors"),e("html").removeClass("accessibility-line-height-large"),e("html").removeClass("accessibility-line-height-huge"),e("html").removeClass("accessibility-size-large"),e("html").removeClass("accessibility-size-huge"),e("input#accessibility-contrast").prop("checked",!1),e("input#line-height-default").prop("checked",!0),e("input#size-default").prop("checked",!0),localStorage.setItem("line-height-large",JSON.stringify(!1)),localStorage.setItem("line-height-huge",JSON.stringify(!1)),localStorage.setItem("size-large",JSON.stringify(!1)),localStorage.setItem("size-huge",JSON.stringify(!1)),localStorage.setItem("blind",JSON.stringify(!1)),localStorage.setItem("restore-defaults",JSON.stringify(!0))}),e(".accessibility-save").click(function(){e("input#accessibility-contrast").is(":checked")?(e("html").addClass("accessibility-colors"),localStorage.setItem("blind",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(e("html").removeClass("accessibility-colors"),localStorage.setItem("blind",JSON.stringify(!1))),e("#line-height-large").is(":checked")?(e("html").addClass("accessibility-line-height-large"),localStorage.setItem("line-height-large",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(e("html").removeClass("accessibility-line-height-large"),localStorage.setItem("line-height-large",JSON.stringify(!1))),e("#line-height-huge").is(":checked")?(e("html").addClass("accessibility-line-height-huge"),localStorage.setItem("line-height-huge",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(e("html").removeClass("accessibility-line-height-huge"),localStorage.setItem("line-height-huge",JSON.stringify(!1))),e("#size-large").is(":checked")?(e("html").addClass("accessibility-size-large"),localStorage.setItem("size-large",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(e("html").removeClass("accessibility-size-large"),localStorage.setItem("size-large",JSON.stringify(!1))),e("#size-huge").is(":checked")?(e("html").addClass("accessibility-size-huge"),localStorage.setItem("size-huge",JSON.stringify(!0)),localStorage.setItem("restore-defaults",JSON.stringify(!1))):(e("html").removeClass("accessibility-size-huge"),localStorage.setItem("size-huge",JSON.stringify(!1)))});var s=function(e,t,s){var o;return function(){var i=this,a=arguments,n=s&&!o;clearTimeout(o),o=setTimeout(function(){o=null,s||e.apply(i,a)},t),n&&e.apply(i,a)}};e(".mobile-menu-toggler").click(function(t){t.preventDefault(),e("html").toggleClass("mobilemenu-open"),e("html").removeClass("menu-language-popover-open"),e("body").removeClass("mobilesearch-open"),e("#mobile-menu").removeClass("reset-touch").addClass("reset-touch")}),e(".tags-toggle").click(function(){e(this).find(".ico-arrow").toggleClass("active"),e(".tags-bottom").toggleClass("visible")}),e(".js-toggle-sub-menu").click(function(){e("#mobile-menu").removeClass("reset-touch").addClass("reset-touch"),e(this).toggleClass("active"),e(this).parent("li").toggleClass("current-parent")}),e(".mobile-menu-close").on("click",function(){event.preventDefault(),e("html").hasClass("menu-language-popover-open")?e("html").removeClass("menu-language-popover-open"):e("html").removeClass("mobilemenu-open")}),e(".js-lang-menu-btn").on("click",function(){e("html").removeClass("search-open"),e(".js-search").removeClass("active"),e("html").hasClass("menu-language-popover-open")?e("html").removeClass("menu-language-popover-open"):(r(e(this)),e("html").addClass("menu-language-popover-open"))});var o,i,a,n,r=function(t){var s=e("html").hasClass("language-flags-disabled")?t.find(".js-lang-title-inner"):t,o=e("html").hasClass("language-flags-disabled")?5:9;e(".js-popup-menu-popover").css({top:s.offset().top+s.outerHeight()-e(".site-container").offset().top,right:e(window).width()-s.offset().left-s.outerWidth()-o})},l=function(){var t=e("html"),s=e(".js-menu-language-settings");e(window).width()<=1024&&0===s.closest(".js-menu-main-mobile").length?s.appendTo(".js-menu-main-mobile"):e(window).width()>1024&&0===s.closest(".js-menu-main-desktop").length&&(t.hasClass("language-menu-mode-list")?(s.appendTo(".js-menu-language-list-setting-parent"),r(e(".js-lang-menu-btn"))):(s.appendTo(".js-menu-language-popover-setting-parent"),r(e(".js-lang-menu-btn"))))},c=function(t,s){s>.6?e(t).find(".js-background-type").addClass("light-background").removeClass("dark-background"):e(t).find(".js-background-type").addClass("dark-background").removeClass("light-background")},g=function(t,s){return function(t,s){if(t&&s){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,s){t[e]=+s})),"string"==typeof s&&(s=s.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(s,function(e,t){s[e]=+t})),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof s&&s.hasOwnProperty("length")&&3==s.length&&s.push(1);var o=[0,0,0,0];return o[3]=1-(1-s[3])*(1-t[3]),0===o[3]&&(o[3]=1e-6),o[0]=Math.min(s[0]*s[3]/o[3]+t[0]*t[3]*(1-s[3])/o[3],255),o[1]=Math.min(s[1]*s[3]/o[3]+t[1]*t[3]*(1-s[3])/o[3],255),o[2]=Math.min(s[2]*s[3]/o[3]+t[2]*t[3]*(1-s[3])/o[3],255),e.map(o,function(e){return Math.floor(e)})}}(t||[255,255,255,1],s||[255,255,255,1])},h=function(e,t){var s=g(e,t);return Math.round((.2126*+s[0]+.7152*+s[1]+.0722*+s[2])/2.55)/100},d=function(){var t=e(".main-content");if(e("html").hasClass("comments-open")){var s=e(document).outerHeight(),o=e(".js-site-header").outerHeight(),i=e(".article-comments"),a=i.outerHeight(),n=e(".site-footer").outerHeight();i.css("min-height",s-o),t.css("min-height",a-n),e("html, body").animate({scrollTop:e(".js-comments").offset().top},300)}else t.removeAttr("style")},u=function(){e(".article-comments").removeAttr("style");e(document).height(),e(".site-container").height(),e(".article-comments").height();var t=parseInt(e(".article-comments").css("padding-top")),s=parseInt(e(".article-comments").css("padding-bottom")),o=e(".page-content").height(),i=e(".site-header").height(),a=o+i+e(".site-footer").height()-i-t-s;e(window).width()>480&&e(".article-comments").css("min-height",a)},m=function(t){if(e(".js-type-btn").removeClass("is-active"),t.addClass("is-active"),"photo-article"==t.data("article-type")){e(".js-article-title").prependTo(".js-article-header-title-wrap"),e(".js-text-article-component").addClass("is-hidden"),e(".js-photo-article-component").removeClass("is-hidden"),e(".js-site-header").addClass("photo-article"),e(".js-site-header .js-background-settings").removeClass("is-hidden");var s=e(".js-site-header .js-background-type").data("article-bg-type");e(".js-site-header .js-background-type").removeClass("dark-background light-background").addClass(s),Edicy.articles.currentArticle.setData("photo_article_state",!0)}else{e(".js-article-title").prependTo(".js-article-body-title-wrap"),e(".js-photo-article-component").addClass("is-hidden"),e(".js-text-article-component").removeClass("is-hidden"),e(".js-site-header").removeClass("photo-article"),e(".js-site-header .js-background-settings").addClass("is-hidden");s=e(".js-site-header .js-background-type").data("blog-bg-type");e(".js-site-header .js-background-type").removeClass("dark-background light-background").addClass(s),Edicy.articles.currentArticle.setData("photo_article_state",!1)}},p=function(){e(window).width()<=640?e(".js-voog-search-modal").css("max-height",e(window).height()-56):e(".js-voog-search-modal").css("max-height","auto")};window.site=e.extend(window.site||{},{bgPickerPreview:function(t,s,o,i){var a=e(t).find(".js-background-image").css("background-image"),n=s.imageSizes?function(e,t){for(var s,o=0,i=e.length;o<i;o++){if(e[o].width<t)return s||e[o];s=e[o]}return e[e.length-1]}(s.imageSizes,e(window).width()):null,r=s.image&&""!==s.image?"url("+n.url+")":"none",l=s.imageSizes&&""!==s.imageSizes?s.imageSizes:null,g=s.color&&""!==s.color?s.color:"rgba(0,0,0,0)",d=(s.colorData&&""!==s.colorData&&s.colorData.lightness,e("<img>")),u=e("<canvas>"),m=s.image&&""!==s.image?s.image:null;m?function(e,t){for(var s=e.length;s--;)if(t.indexOf(e[s].url.trim())>-1)return!0;return!1}(l,a)?(o.imageColor=o.imageColor?o.imageColor:i,o.combinedLightness=h(o.imageColor,g),c(t,o.combinedLightness)):(d.attr("src",m.replace(/.*\/(photos|voogstock)/g,"/photos")),d.on("load",function(){ColorExtract.extract(d[0],u[0],function(e){o.imageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",o.combinedLightness=h(o.imageColor,g),c(t,o.combinedLightness)})})):(o.imageColor="rgba(255,255,255,1)",o.combinedLightness=h(o.imageColor,g),c(t,o.combinedLightness)),"articlePage"===pageType&&t.hasClass("site-header")?e("#preview-style").html(".photo-article.site-header .js-background-image { background-image: "+r+" } .photo-article.site-header .js-background-color { background-color: "+g+" }"):(e(t).find(".js-background-image").css({"background-image":r}),e(t).find(".js-background-color").css({"background-color":g}))},bgPickerCommit:function(t,s,o,i){var a,n=e.extend(!0,{},s);n.image=s.image||"",n.imageSizes=null==(a=s.imageSizes)||"string"==typeof a&&a.match(/^[\\'"]+$/)?"":a,n.color=s.color||"",n.combinedLightness=o.combinedLightness,"articlePage"===i?"footer_bg"==t?siteData.set(t,n):Edicy.articles.currentArticle.setData(t,n):"contentPage"===i&&"footer_bg"===t||"body_bg"===t?siteData.set(t,n):pageData.set(t,n)},bgPickerColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},initWindowResize:function(){e(window).resize(s(function(){u(),p(),l(),e(".js-menu-language-settings-popover").hide()},100)),e(window).resize(s(function(){e("html").removeClass("menu-language-popover-open"),e(".js-menu-language-settings-popover").hide(),e(".js-menu-language-settings-toggle").removeClass("edy-cbtn-active")},25))},initBlogPage:function(){},initArticlePage:function(){u(),e("html").hasClass("js-calculate-comments-height")&&d()},initCommonPage:function(){},initFrontPage:function(){},bindLanguageMenuSettings:function(t){"type"in t||(t.type="popover"),"item_state"in t||(t.item_state="flags_and_names");new Edicy.SettingsEditor(e(".js-menu-language-settings-toggle").get(0),{menuItems:[{titleI18n:"format_desktop_only",type:"radio",key:"type",list:[{titleI18n:"dropdown_menu",value:"popover"},{titleI18n:"expanded_menu",value:"list"}]},{titleI18n:"show",type:"radio",key:"item_state",list:[{titleI18n:"flags_only",value:"flags_only"},{titleI18n:"names_only",value:"names_only"},{titleI18n:"flags_and_names",value:"flags_and_names"}]}],buttonTitleI18n:"settings",values:t,containerClass:["js-menu-language-settings-popover","js-prevent-sideclick"],preview:function(t){var s=e("html");e(".js-menu-language-settings"),"list"===t.type?(s.removeClass("language-menu-mode-popover"),s.removeClass("menu-language-popover-open"),s.addClass("language-menu-mode-list")):(s.removeClass("language-menu-mode-list"),s.addClass("language-menu-mode-popover"),s.addClass("menu-language-popover-open")),"flags_only"===t.item_state?(s.removeClass("language-flags-disabled"),s.removeClass("language-names-enabled"),s.addClass("language-flags-enabled"),s.addClass("language-names-disabled")):"names_only"===t.item_state?(s.removeClass("language-flags-enabled"),s.removeClass("language-names-disabled"),s.addClass("language-flags-disabled"),s.addClass("language-names-enabled")):"flags_and_names"===t.item_state&&(s.removeClass("language-flags-disabled"),s.removeClass("language-names-disabled"),s.addClass("language-flags-enabled"),s.addClass("language-names-enabled")),l(),this.setPosition()},commit:function(e){siteData.set("settings_language_menu",e)}});l()},initItemsPage:function(){t()||(e(document).ready(function(){setTimeout(function(){e(".js-content-item-box").addClass("not-loaded")},3e3)}),e(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var t=e(this).closest(".js-content-item-box");t.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){t.removeClass("not-loaded with-error"),t.find(".js-loader").remove()},3e3)}}))},bindContentItemImgDropAreas:function(t){e(".js-content-item-img-drop-area").each(function(s,o){var i=e(o),a=i.closest(".js-content-item-box"),n=a.data("item-id"),r=a.data("item-type");new Edicy.CustomData({type:r,id:n}),new Edicy.ImgDropArea(i,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+t+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(t){var s,o,l,c,g,h,d,u,m,p,f,b,v;i.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),t?(s=t.original_id,a.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),o=a,l=t.width,c=t.height,g=o.find(".js-content-item-img-drop-area"),h=o.find(".js-toggle-crop-state"),l>c?g.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):l===c?g.removeClass("image-landscape image-square image-portrait").addClass("image-square"):g.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),g.hasClass("image-square")?h.removeClass("is-visible").addClass("is-hidden"):h.removeClass("is-hidden").addClass("is-visible")):(s=null,a.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),a.find(".edy-img-drop-area-placeholder").css("opacity",0)),d=a,u=i,m=n,p=s,b="article"===(f=r)?"articles":"pages",v=new Edicy.CustomData({type:f,id:m}),e.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+b+"/"+m,data:JSON.stringify({image_id:p}),dataType:"json",success:function(e){v.set("image_crop_state","not-cropped"),d.removeClass("not-loaded with-error").addClass("is-loaded"),d.find(".edy-img-drop-area-placeholder").css("opacity",1),u.css("opacity",1)},timeout:3e4,error:function(e){d.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})}})})},bindContentItemImageCropToggle:function(){e(".js-toggle-crop-state").on("click",function(){var t,s=e(this).closest(".js-content-item-box"),o=s.find(".js-content-item-img-drop-area"),i=s.data("item-id"),a=s.data("item-type"),n=new Edicy.CustomData({type:a,id:i});o.hasClass("is-cropped")?(o.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(o.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),n.set("image_crop_state",t)})},bindRootItemSettings:function(t){"show_product_related_pages_in_main_menu"in t||(t.show_product_related_pages_in_main_menu=!1),e(".js-root-item-settings-toggle").each(function(s,o){new Edicy.SettingsEditor(o,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:t,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(t){1==!t.show_product_related_pages_in_main_menu?e(".js-menu-item-products").addClass("is-hidden"):e(".js-menu-item-products").removeClass("is-hidden")},commit:function(e){siteData.set("settings_root_item",e)}})})},bindSiteSearch:function(t,s,o){t&&new VoogSearch(t,{per_page:10,lang:s,resultsContainer:e(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:o})}}),window.site=e.extend(window.site||{},{}),e(".site-container").on("mousedown",function(t){e(t.target).closest(".js-prevent-sideclick").length||(e(".js-btn").hasClass("open")&&e(".js-btn").removeClass("open"),e(".js-popover").hasClass("expanded")&&e(".js-popover").removeClass("expanded"),e(".js-search").hasClass("active")&&(e(".js-search").removeClass("active"),e(".search-btn").removeClass("open")),e("html").hasClass("mobilemenu-open")&&e(".mobile-menu-toggler").trigger("click"),e("html").hasClass("menu-language-popover-open")&&e("html").removeClass("menu-language-popover-open"),e("html").hasClass("comments-open")&&(e("html").removeClass("comments-open"),e(".js-comments-toggle-btn, .js-comments").removeClass("open")),e("html").hasClass("search-open")&&e("html").removeClass("search-open"),d())}),e(".js-menu-btn").click(function(){e(this).toggleClass("open"),e(".js-menu-main").toggleClass("expanded")}),e(".js-menu-lang-btn").click(function(){e(".js-menu-lang-btn").toggleClass("open"),e(".js-menu-lang").toggleClass("expanded")}),e(".js-tags-btn").click(function(){e(this).toggleClass("open"),e(".js-menu-tags").toggleClass("expanded")}),e(".js-search-toggle-btn").click(function(){e("html").removeClass("mobilemenu-open"),e("html").removeClass("menu-language-popover-open"),e(".js-search").toggleClass("active"),e(".js-search").hasClass("active")&&e(".js-search-input").focus(),e("html").toggleClass("search-open")}),e(".js-search-input").on("input",function(){var t=e(this).parent().next();e(this).val().length>1?t.addClass("active"):t.removeClass("active"),p()}),e(".js-search-reset-btn").click(function(){e("html").removeClass("search-open"),e(".js-search").removeClass("active")}),e(".js-comments-toggle-btn").click(function(){e(this).toggleClass("open"),e(".js-comments").toggleClass("open"),e("html").toggleClass("comments-open"),e(".js-comments-input").val("").focus(),e(window).width()>640&&d()}),e(".submenu-load-more-lvl1").click(function(){e(this).addClass("open"),e(this).next().addClass("open"),e(this).next().next().addClass("open")}),e(".submenu-close-lvl1").click(function(){e(this).removeClass("open"),e(this).prev().removeClass("open"),e(this).next().removeClass("open")}),e(".submenu-load-more-lvl2").click(function(){e(this).addClass("open"),e(this).next().addClass("open"),e(this).next().next().addClass("open")}),e(".submenu-close-lvl2").click(function(){e(this).removeClass("open"),e(this).prev().removeClass("open"),e(this).next().removeClass("open")}),e(".js-type-btn").click(function(){m(e(this))}),e(".publicmode .js-slide-to-article").click(function(){e("html, body").animate({scrollTop:e(".page-content").offset().top},300)}),e("body:not(.editmode) table").each(function(){e(this).wrap('<div class="table-holder" />')}),e(document).ready(function(){e(".comment-form").hasClass("form_with_errors")?e("html, body").scrollTop(e(".comment-form").offset().top):e("form").find(".form_error, .form_notice").length>0&&e("html, body").scrollTop(e(".form_error, .form_notice").closest("form").offset().top)}),document.addEventListener("edicy:customstyles:change",function(t){Object.keys(t.detail.changes).indexOf("--header-background-color")>-1&&(void 0===t.detail.changes["--header-background-color"].value?(e("body").removeClass("header-top-with-bg"),siteData.remove("has_header_bg_color")):(e("body").addClass("header-top-with-bg"),siteData.set("has_header_bg_color",!0)))}),!Modernizr.flexbox&&t()&&(o=e(".js-header-top-wrap").width(),i=e(".js-header-right"),a=i.width(),n=parseInt(i.css("margin-left"))+1,e(".js-header-left").css("min-width",o-a-n))}(jQuery),PriorityQueue=function(){function e(e){this.comparator=e,this.contents=[],this.sorted=!1}return e.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},e.prototype.push=function(e){return this.contents.push(e),this.sorted=!1},e.prototype.peek=function(e){return null==e&&(e=this.contents.length-1),this.sorted||this.sort(),this.contents[e]},e.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},e.prototype.size=function(){return this.contents.length},e.prototype.map=function(e){return this.contents.map(e)},e}(),MMCQ=function(){var e,t,s,o,i,a;function n(){this.maxIterations=1e3,this.fractByPopulations=.75}return n.sigbits=5,n.rshift=8-n.sigbits,o=function(e,t,s){return(e<<2*n.sigbits)+(t<<n.sigbits)+s},e=function(){function e(e,t,s,o,i,a,n){this.r1=e,this.r2=t,this.g1=s,this.g2=o,this.b1=i,this.b2=a,this.histo=n}return e.prototype.volume=function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},e.prototype.count=function(e){var t,s,i,a,n,r,l,c,g,h,d;if(!this._count_set||e){for(a=0,n=r=this.r1,g=this.r2;r<=g;n=r+=1)for(s=l=this.g1,h=this.g2;l<=h;s=l+=1)for(t=c=this.b1,d=this.b2;c<=d;t=c+=1)i=o(n,s,t),a+=this.histo[i]||0;this._count_set=!0,this._count=a}return this._count},e.prototype.copy=function(){return new e(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},e.prototype.average=function(e){var t,s,i,a,r,l,c,g,h,d,u,m,p,f,b,v;if(!this._average||e){for(c=1<<8-n.sigbits,d=0,h=0,a=0,s=0,g=u=this.r1,f=this.r2;u<=f;g=u+=1)for(i=m=this.g1,b=this.g2;m<=b;i=m+=1)for(t=p=this.b1,v=this.b2;p<=v;t=p+=1)l=o(g,i,t),d+=r=this.histo[l]||0,h+=r*(g+.5)*c,a+=r*(i+.5)*c,s+=r*(t+.5)*c;this._average=d?[~~(h/d),~~(a/d),~~(s/d)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},e.prototype.contains=function(e){var t,s,o;return o=e[0]>>n.rshift,s=e[1]>>n.rshift,t=e[2]>>n.rshift,this.r1<=o&&o<=this.r2&&this.g1<=s&&s<=this.g2&&this.b1<=t&&t<=this.b2},e}(),t=function(){function e(){this.cboxes=new PriorityQueue(function(e,t){var s,o;return(s=e.count()*e.volume())>(o=t.count()*t.volume())?1:s<o?-1:0})}return e.prototype.push=function(e){return this.cboxes.push({cbox:e,color:e.average()})},e.prototype.palette=function(){return this.cboxes.map(function(e){return e.color})},e.prototype.size=function(){return this.cboxes.size()},e.prototype.map=function(e){var t,s,o;for(t=s=0,o=this.cboxes.size();s<o;t=s+=1)return this.cboxes.peek(t).cbox.contains(e)?this.cboxes.peek(t).color:this.nearest(e)},e.prototype.cboxes=function(){return this.cboxes},e.prototype.nearest=function(e){var t,s,o,i,a,n,r;for(a=function(e){return e*e},o=1e9,s=n=0,r=this.cboxes.size();n<r;s=n+=1)(t=Math.sqrt(a(e[0]-this.cboxes.peek(s).color[0])+a(e[1]-this.cboxes.peek(s).color[1])+a(e[2]-this.cboxes.peek(s).color[2])))<o&&(o=t,i=this.cboxes.peek(s).color);return i},e}(),i=function(e){var t,s,i,a,r,l,c,g,h;for(a=1<<3*n.sigbits,i=new Array(a),g=0,h=e.length;g<h;g++)c=(l=e[g])[0]>>n.rshift,s=l[1]>>n.rshift,t=l[2]>>n.rshift,i[r=o(c,s,t)]=(i[r]||0)+1;return i},s=function(t,s){var o,i,a,r,l,c,g,h,d,u,m,p;for(u=1e6,d=0,c=1e6,l=0,a=1e6,i=0,m=0,p=t.length;m<p;m++)h=(g=t[m])[0]>>n.rshift,r=g[1]>>n.rshift,o=g[2]>>n.rshift,h<u?u=h:h>d&&(d=h),r<c?c=r:r>l&&(l=r),o<a?a=o:o>i&&(i=o);return new e(u,d,c,l,a,i,s)},a=function(e,t){var s,i,a,n,r,l,c,g,h,d,u,m,p,f,b,v,C,y,w,j,_,k,x,S,I,z,O,A,N,D;if(t.count()){if(1===t.count())return[t.copy()];if(d=t.r2-t.r1+1,r=t.g2-t.g1+1,i=t.b2-t.b1+1,c=Math.max(d,r,i),m=0,g=[],l=[],c===d)for(h=p=t.r1,k=t.r2;p<=k;h=p+=1){for(u=0,n=f=t.g1,O=t.g2;f<=O;n=f+=1)for(s=b=t.b1,A=t.b2;b<=A;s=b+=1)u+=e[o(h,n,s)]||0;m+=u,g[h]=m}else if(c===r)for(n=v=t.g1,N=t.g2;v<=N;n=v+=1){for(u=0,h=C=t.r1,D=t.r2;C<=D;h=C+=1)for(s=y=t.b1,x=t.b2;y<=x;s=y+=1)u+=e[o(h,n,s)]||0;m+=u,g[n]=m}else for(s=w=t.b1,S=t.b2;w<=S;s=w+=1){for(u=0,h=j=t.r1,I=t.r2;j<=I;h=j+=1)for(n=_=t.g1,z=t.g2;_<=z;n=_+=1)u+=e[o(h,n,s)]||0;m+=u,g[s]=m}return g.forEach(function(e,t){return l[t]=m-e}),a=function(e){var s,o,i,a,n,r,c,h,d,u,p;for(r=e+"2",c=u=t[n=e+"1"],p=t[r];u<=p;c=u+=1)if(g[c]>m/2){for(s=t.copy(),o=t.copy(),a=(h=c-t[n])<=(d=t[r]-c)?Math.min(t[r]-1,~~(c+d/2)):Math.max(t[n],~~(c-1-h/2));!g[a];)a++;for(i=l[a];!i&&g[a-1];)i=l[--a];return s[r]=a,o[n]=s[r]+1,[s,o]}},c===d?a("r"):c===r?a("g"):c===i?a("b"):void 0}},n.prototype.quantize=function(e,o){var n,r,l,c,g,h,d=this;if(!e.length||o<2||o>256)return console.log("invalid arguments"),!1;for(l=i(e),n=s(e,l),(g=new PriorityQueue(function(e,t){var s,o;return(s=e.count())>(o=t.count())?1:s<o?-1:0})).push(n),(c=function(e,t){var s,o,i,r,c;for(r=1,c=0;c<d.maxIterations;)if((n=e.pop()).count()){if(s=(i=a(l,n))[0],o=i[1],!s)return void console.log("cbox1 not defined; shouldn't happen");if(e.push(s),o&&(e.push(o),r++),r>=t)return;if(c++>d.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else e.push(n),c++})(g,this.fractByPopulations*o),h=new PriorityQueue(function(e,t){var s,o;return(s=e.count()*e.volume())>(o=t.count()*t.volume())?1:s<o?-1:0});g.size();)h.push(g.pop());for(c(h,o-h.size()),r=new t;h.size();)r.push(h.pop());return r},n}.call(this),function(){window.ColorExtract=function(){function e(){}return e.getColorMap=function(e,t,s,o,i,a){var n,r,l,c,g,h,d,u,m,p;for(null==a&&(a=8),l=e.getContext("2d").getImageData(t,s,o,i).data,c=[],h=d=s,m=s+i;d<m;h=d+=1)for(r=h*o*4,g=u=t,p=t+o;u<p;g=u+=1)n=r+4*g,c.push([l[n],l[n+1],l[n+2]]);return(new MMCQ).quantize(c,a)},e.colorDist=function(e,t){var s;return(s=function(e){return e*e})(e[0]-t[0])+s(e[1]-t[1])+s(e[2]-t[2])},e.extract=function(t,s,o){var i,a,n,r,l,c,g,h,d,u,m,p,f;for(s.width=25,s.height=25,s.getContext("2d").drawImage(t,0,0,s.width,s.height),(a=e.getColorMap(s,0,0,s.width,s.height,4).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),i=a[0].rgb,(g=e.getColorMap(s,0,0,t.width,t.height,10).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),h=0,u=0,p=g.length;u<p;u++)n=g[u],(r=e.colorDist(i,n.rgb))>h&&(h=r,l=n.rgb);for(h=0,m=0,f=g.length;m<f;m++)n=g[m],(r=e.colorDist(i,n.rgb))>h&&n.rgb!==l&&(h=r,c=n.rgb);return o({bgColor:(d=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"})(i),fgColor:d(l),fgColor2:d(c)})},e}()}.call(this);